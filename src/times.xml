<?xml version="1.0" encoding="utf-8"?>
<chapter version="5.0" xml:id="tim.times" xml:lang="en" xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink">
  <title>Times</title>


  <sect1 xml:id="tim.instantiation">
    <title>Instantiation</title>

    <para><function>Time.now</function> creates a <literal>Time</literal> instance for the current time, with the resolution of the system clock. <function>Time.new</function> is identical when called without arguments; otherwise it must be given between one and seven arguments specifying the year, month, day, hour, minute, second, and offset from UTC, with which it initialises a <literal>Time</literal> object. All but the year argument are optional.</para>

    <para><function>Time.at(<replaceable>seconds</replaceable>, <replaceable>microseconds</replaceable>=0)</function> creates a <literal>Time</literal> object representing <replaceable>seconds</replaceable> seconds and <replaceable>microseconds</replaceable> microseconds from the Epoch. Both arguments may be any non-<literal>Complex</literal> numeric: if <replaceable>microseconds</replaceable> is a <literal>Float</literal> or <literal>Rational</literal>, the time has nanosecond granularity. If <function>Time.at</function> is given a <literal>Time</literal> object as its sole argument, the argument is returned.</para>

    <para><function>Time.utc</function>, and its alias <function>Time.gm</function>, create a <literal>Time</literal> object for a given time in <acronym>UTC</acronym>. If ten arguments are given they are: second, minute, hour, day of month, year, day of week, isDST?, and the time zone abbreviation. Otherwise, between one and seven arguments are required: year, month, day of month, hour, minute, second, microseconds. In the second form, all but the first argument are optional; the latter may be omitted or <literal>nil</literal>. <function>Time.local</function>, and its alias <function>Time.mktime</function>, are identical to <function>Time.utc</function>, except they interpret their arguments in the local time zone.</para>

    <para>The arguments listed above all correspond to attributes of <literal>Time</literal> objects, so are described in <xref linkend="tim.attributes"/>.</para>
  </sect1>

  <sect1 xml:id="tim.attributes">
    <title>Attributes</title>

    <para>A <literal>Time</literal> object has the following primary attributes. If a <literal>Time</literal> method expects an argument corresponding to a given attribute, the argument must satisfy the attribute’s range; if the argument is omitted, the attribute’s default value is assumed.</para>

    <informaltable>
      <thead>
	<tr>
	  <th>Attribute</th>
	  <th>Description</th>
	  <th>Range</th>
	  <th>Default</th>
	  <th>Accessor</th>
	</tr>
      </thead>
      <tbody>
	<tr>
	  <td>Year</td>
	  <td>Year (possibly including century)</td>
	  <td>Positive <literal>Integer</literal>.</td>
	  <td>N/A</td>
	  <td><function>Time#year</function></td>
	</tr>
	<tr>
	  <td>Month</td>
	  <td>Month of year</td>
	  <td><literal>Integer</literal> (1–12) or three-letter English abbreviation, e.g. <emphasis>3</emphasis> or <emphasis>Feb</emphasis> for February.</td>
	  <td>1</td>
	  <td><function>Time#mon</function>, <function>Time#month</function></td>
	</tr>
	<tr>
	  <td>Day</td>
	  <td>Day of month</td>
	  <td><literal>Integer</literal>: 1–31.</td>
	  <td>1</td>
	  <td><function>Time#day</function>, <function>Time#mday</function></td>
	</tr>
	<tr>
	  <td>Week day</td>
	  <td>Day of week</td>
	  <td><literal>Integer</literal>: 0–6, where Sunday is 0.</td>
	  <td>0</td>
	  <td><function>Time#wday</function></td>
	</tr>
	<tr>
	  <td>Year day</td>
	  <td>Day of year</td>
	  <td><literal>Integer</literal>: 1–366.</td>
	  <td>1</td>
	  <td><function>Time#yday</function></td>
	</tr>
	<tr>
	  <td>Hour</td>
	  <td>Hour on 24-hour clock</td>
	  <td><literal>Integer</literal>: 0–23.</td>
	  <td>0</td>
	  <td><function>Time#hour</function></td>
	</tr>
	<tr>
	  <td>Minute</td>
	  <td>Minute of hour</td>
	  <td><literal>Integer</literal>: 0–59.</td>
	  <td>0</td>
	  <td><function>Time#min</function></td>
	</tr>
	<tr>
	  <td>Second</td>
	  <td>Second of minute</td>
	  <td><literal>Integer</literal>: 0–60<footnote><para>This range allows for leap seconds.</para></footnote>.</td>
	  <td>0</td>
	  <td><function>Time#sec</function></td>
	</tr>
	<tr>
	  <td>Microseconds</td>
	  <td>Microsecond<footnote><para>1 microsecond is 10<superscript>−6</superscript> seconds</para></footnote> of second</td>
	  <td>Positive numeric less than 1000000000.</td>
	  <td>0</td>
	  <td><function>Time#usec</function>, <function>Time#tv_usec</function></td>
	</tr>
	<tr>
	  <td>Nanoseconds</td>
	  <td>Nanosecond<footnote><para>1 nanosecond is 10<superscript>−9</superscript> seconds</para></footnote> of microsoecond</td>
	  <td><literal>Integer</literal></td>
	  <td>0</td>
	  <td><function>Time#nsec</function>, <function>Time#tv_nsec</function></td>
	</tr>
	<tr>
	  <td>Zone</td>
	  <td>Time zone abbreviation</td>
	  <td><literal>String</literal>, e.g. <emphasis>UTC</emphasis> or <emphasis>CST</emphasis>.</td>
	  <td>UTC<remark>TODO: Check this</remark></td>
	  <td><function>Time#zone</function></td>
	</tr>
	<tr>
	  <td>isDST?</td>
	  <td>Does the time occur in daylight saving time?</td>
	  <td><literal>true</literal> (yes) or <literal>false</literal> (no).</td>
	  <td><literal>false</literal><remark>TODO: Check this</remark></td>
	  <td><function>Time#isdst</function>, <function>Time#dst?</function></td>
	</tr>
      </tbody>
    </informaltable>
  </sect1>

 <sect1 xml:id="tim.predicates">
   <title>Predicates</title>

   <para><literal>Time</literal> objects respond to the following predicates. They return <literal>true</literal> if the condition is true; <literal>false</literal>, otherwise.</para>

   <variablelist>
     <varlistentry>
       <term><function>Time#dst?</function></term>
       <term><function>Time#isdst</function></term>
       <listitem>
	 <para>Occurs in <acronym>DST</acronym></para>
       </listitem>
     </varlistentry>
     <varlistentry>
       <term><function>Time#friday?</function></term>
       <listitem>
	 <para>Occurs on a Friday</para>
       </listitem>
     </varlistentry>
     <varlistentry>
       <term><function>Time#gmt?</function></term>
       <term><function>Time#utc?</function></term>
       <listitem>
	 <para>Occurs in <acronym>UTC</acronym></para>
       </listitem>
     </varlistentry>
     <varlistentry>
       <term><function>Time#monday?</function></term>
       <listitem>
	 <para>Occurs on a Monday</para>
       </listitem>
     </varlistentry>
     <varlistentry>
       <term><function>Time#saturday?</function></term>
       <listitem>
	 <para>Occurs on a Saturday</para>
       </listitem>
     </varlistentry>
     <varlistentry>
       <term><function>Time#sunday?</function></term>
       <listitem>
	 <para>Occurs on a Sunday</para>
       </listitem>
     </varlistentry>
     <varlistentry>
       <term><function>Time#thursday?</function></term>
       <listitem>
	 <para>Occurs on a Thursday</para>
       </listitem>
     </varlistentry>
     <varlistentry>
       <term><function>Time#tuesday?</function></term>
       <listitem>
	 <para>Occurs on a Tuesday</para>
       </listitem>
     </varlistentry>
     <varlistentry>
       <term><function>Time#wednesday?</function></term>
       <listitem>
	 <para>Occurs on a Wednesday</para>
       </listitem>
     </varlistentry>
   </variablelist>
 </sect1>
  
 <sect1 xml:id="tim.arithmetic">
   <title>Arithmetic</title>
   
   <para><function>Time#+(<replaceable>numeric</replaceable>)</function> adds <replaceable>numeric</replaceable> seconds to the receiver, and returns the result. Conversely, <function>Time#-(<replaceable>numeric</replaceable>)</function> subtracts <replaceable>numeric</replaceable> seconds from the receiver and returns the result. If <function>Time#-</function> is given a <literal>Time</literal> argument instead, it returns a new <literal>Time</literal> object representing the difference between them.</para>

   <para><literal>Time</literal> objects implement <function>Time#&lt;=&gt;</function> with the <link linkend="obj.order">standard semantics</link>, and mix-in the <literal>Comparable</literal> module. This allows inequalities to be tested between a <literal>Time</literal> object and a <literal>Numeric</literal> object—where the latter represents a number a seconds since the Unix epoch—or two <literal>Time</literal> objects.</para>
 </sect1>

 <sect1 xml:id="tim.format">
   <title>Formatting</title>

   <para><function>Time#strftime</function> converts the receiver to a <literal>String</literal> by means of a user-supplied <emphasis>format string</emphasis>, analogous to <xref linkend="str.format"/>. The format string contains any number of <emphasis>format directives</emphasis> which consist of a percent sign, <literal>%</literal>, followed by one of the <emphasis>format specifiers</emphasis> tabulated below. If a circumflex accent, <literal>^</literal>, appears between <literal>%</literal> and the specifier, text generated by the specifier is upper-cased. The format string is returned with each format directive substituted for its payload. </para>

   <informaltable>
     <thead>
       <tr>
	 <th>Specifier</th>
	 <th>Description</th>
	 <th>Range</th>
       </tr>
     </thead>
     <tbody>
       <tr>
	 <td><literal>a</literal></td>
	 <td>Abbreviated name of day</td>
	 <td><emphasis>Sun</emphasis>—<emphasis>Sat</emphasis></td>
       </tr>
       <tr>
	 <td><literal>A</literal></td>
	 <td>Name of day</td>
	 <td><emphasis>Sunday</emphasis>—<emphasis>Saturday</emphasis></td>
       </tr>
       <tr>
	 <td><literal>b</literal></td>
	 <td>Abbreviated name of month</td>
	 <td><emphasis>Jan</emphasis>—<emphasis>Dec</emphasis></td>
       </tr>
       <tr>
	 <td><literal>B</literal></td>
	 <td>Name of month</td>
	 <td><emphasis>January</emphasis>—<emphasis>December</emphasis></td>
       </tr>
       <tr>
	 <td><literal>c</literal></td>
	 <td>Date and time representation for the current locale</td>
	 <td>&#160;</td>
       </tr>
       <tr>
	 <td><literal>d</literal></td>
	 <td>Double-digit day of the month</td>
	 <td><emphasis>01</emphasis>–<emphasis>31</emphasis></td>
       </tr>
       <tr>
	 <td><literal>H</literal></td>
	 <td>Hour of day, on 24-hour clock</td>
	 <td><emphasis>00</emphasis>–<emphasis>23</emphasis></td>
       </tr>
       <tr>
	 <td><literal>I</literal></td>
	 <td>Hour of day, on 12-hour clock</td>
	 <td><emphasis>01</emphasis>—<emphasis>12</emphasis></td>
       </tr>
       <tr>
	 <td><literal>j</literal></td>
	 <td>Three-digit day of year</td>
	 <td><emphasis>001</emphasis>–<emphasis>366</emphasis></td>
       </tr>
       <tr>
	 <td><literal>m</literal></td>
	 <td>Two-digit month of year</td>
	 <td><emphasis>01</emphasis>—<emphasis>12</emphasis></td>
       </tr>
       <tr>
	 <td><literal>M</literal></td>
	 <td>Minute of the hour</td>
	 <td><emphasis>00</emphasis>–<emphasis>59</emphasis></td>
       </tr>
       <tr>
	 <td><literal>p</literal></td>
	 <td>Meridian indicator, upper-case</td>
	 <td><emphasis>AM</emphasis>, <emphasis>PM</emphasis></td>
       </tr>
       <tr>
	 <td><literal>P</literal></td>
	 <td>Meridian indicator, lower-case</td>
	 <td><emphasis>am</emphasis>–<emphasis>pm</emphasis></td>
       </tr>
       <tr>
	 <td><literal>s</literal></td>
	 <td>Number of seconds since the Unix epoch</td>
	 <td><emphasis>0</emphasis>–</td>
       </tr>
       <tr>
	 <td><literal>S</literal></td>
	 <td>Second of minute</td>
	 <td><emphasis>00</emphasis>–<emphasis>60</emphasis></td>
       </tr>
       <tr>
	 <td><literal>U</literal></td>
	 <td>Week number of year, starting with the first Sunday as the first day of week <emphasis>01</emphasis></td>
	 <td><emphasis>00</emphasis>–<emphasis>53</emphasis></td>
       </tr>
       <tr>
	 <td><literal>W</literal></td>
	 <td>Week number of year, starting with the first Monday as the first day of week <emphasis>01</emphasis></td>
	 <td><emphasis>00</emphasis>–<emphasis>53</emphasis></td>
       </tr>
       <tr>
	 <td><literal>w</literal></td>
	 <td>Day of week, Sunday being <emphasis>0</emphasis></td>
	 <td><emphasis>0</emphasis>–<emphasis>6</emphasis></td>
       </tr>
       <tr>
	 <td><literal>x</literal></td>
	 <td>Date representation for current locale, without time</td>
	 <td>&#160;</td>
       </tr>
       <tr>
	 <td><literal>X</literal></td>
	 <td>Time representation for current locale, without date</td>
	 <td>&#160;</td>
       </tr>
       <tr>
	 <td><literal>y</literal></td>
	 <td>Two-digit year as decimal, without century</td>
	 <td><emphasis>00</emphasis>–<emphasis>99</emphasis></td>
       </tr>
       <tr>
	 <td><literal>Y</literal></td>
	 <td>Year as decimal, with century</td>
	 <td><emphasis>0</emphasis>–</td>
       </tr>
       <tr>
	 <td><literal>Z</literal></td>
	 <td>Name of time zone</td>
	 <td>&#160;</td>
       </tr>
     </tbody>
   </informaltable>
 </sect1>
</chapter>