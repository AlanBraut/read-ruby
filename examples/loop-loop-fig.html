<a href=/examples/loop-loop-fig.rb><pre class=syntax><code><span class="k">class</span> <span class="nc">Integer</span>
  <span class="k">def</span> <span class="nf">happy?</span>
    <span class="k">return</span> <span class="kp">false</span> <span class="k">unless</span> <span class="nb">self</span> <span class="o">&gt;</span> <span class="mi">0</span>
    <span class="n">sad</span><span class="p">,</span> <span class="n">sequence</span> <span class="o">=</span> <span class="o">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">37</span><span class="p">,</span> <span class="mi">58</span><span class="p">,</span> <span class="mi">89</span><span class="p">,</span> <span class="mi">145</span><span class="p">,</span> <span class="mi">42</span><span class="p">,</span> <span class="mi">20</span><span class="o">]</span><span class="p">,</span> <span class="o">[</span><span class="nb">self</span><span class="o">]</span>
    <span class="kp">loop</span> <span class="k">do</span>
      <span class="n">sequence</span> <span class="o">&lt;&lt;</span> <span class="n">sequence</span><span class="o">.</span><span class="n">last</span><span class="o">.</span><span class="n">to_s</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="sr">//</span><span class="p">)</span><span class="o">.</span><span class="n">map</span><span class="p">{</span><span class="o">|</span><span class="n">d</span><span class="o">|</span> <span class="n">d</span><span class="o">.</span><span class="n">to_i</span> <span class="o">**</span> <span class="mi">2</span><span class="p">}</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="ss">:+</span><span class="p">)</span>
      <span class="k">return</span> <span class="kp">true</span> <span class="k">if</span> <span class="n">sequence</span><span class="o">.</span><span class="n">last</span> <span class="o">==</span> <span class="mi">1</span>
      <span class="k">return</span> <span class="kp">false</span> <span class="k">if</span> <span class="n">sequence</span><span class="o">.</span><span class="n">last</span><span class="p">(</span><span class="n">sad</span><span class="o">.</span><span class="n">size</span><span class="p">)</span> <span class="o">==</span> <span class="n">sad</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
<span class="p">(</span><span class="mi">1</span><span class="o">.</span><span class="n">.</span><span class="mi">15</span><span class="p">)</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:happy?</span><span class="p">)</span> <span class="c1">#=&gt; [1, 7, 10, 13]</span>
</code></pre>
</a>