<a href=/examples/postfix-while-statement-fig.rb><pre class=syntax><code><span class="c1"># (n.to_s(2).count(&#39;1&#39;) works just as well, of course)</span>
<span class="k">def</span> <span class="nf">bits_set</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
  <span class="n">bits_set</span> <span class="o">=</span> <span class="mi">0</span>
  <span class="n">n</span> <span class="o">&amp;=</span> <span class="n">n</span> <span class="o">-</span> <span class="mi">1</span> <span class="k">while</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">bits_set</span> <span class="o">+=</span> <span class="mi">1</span>
  <span class="n">bits_set</span>
<span class="k">end</span>
<span class="o">[</span><span class="mi">33</span><span class="p">,</span> <span class="mi">736</span><span class="p">,</span> <span class="mi">128</span><span class="o">].</span><span class="n">map</span><span class="p">{</span><span class="o">|</span><span class="n">n</span><span class="o">|</span> <span class="n">bits_set</span><span class="p">(</span><span class="n">n</span><span class="p">)}</span> <span class="c1">#=&gt; [2, 4, 1]</span>
</code></pre>
</a>