<a href=/examples/proc-semantics-return.rb><pre class=syntax><code><span class="k">def</span> <span class="nf">inner</span> <span class="o">&amp;</span><span class="n">closure</span>
  <span class="nb">puts</span> <span class="s2">&quot;</span><span class="se">\t\t</span><span class="s2">main -&amp;gt; outer -&amp;gt; inner: Calling closure &amp;lt;call site&amp;gt;&quot;</span>
  <span class="n">closure</span><span class="o">.</span><span class="n">call</span>
  <span class="nb">puts</span> <span class="s2">&quot;</span><span class="se">\t\t</span><span class="s2">main -&amp;gt; outer -&amp;gt;  inner: Called closure &amp;lt;/call site&amp;gt;&quot;</span>
<span class="k">end</span>
<span class="k">def</span> <span class="nf">outer</span>
  <span class="nb">puts</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">main -&amp;gt; outer: Invoking inner &amp;lt;creation site&amp;gt;&quot;</span>
  <span class="n">inner</span> <span class="k">do</span>
    <span class="nb">puts</span> <span class="s2">&quot;</span><span class="se">\t\t\t</span><span class="s2">main -&amp;gt; outer -&amp;gt; inner -&amp;gt; closure: Return from closure&quot;</span>
    <span class="k">return</span>
    <span class="nb">puts</span> <span class="s2">&quot;</span><span class="se">\t\t\t</span><span class="s2">main -&amp;gt; outer -&amp;gt; inner -&amp;gt; closure: Returned from closure&quot;</span>
  <span class="k">end</span>
  <span class="nb">puts</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">main -&amp;gt; outer: Invoked outer &amp;lt;/creation site&amp;gt;&quot;</span>
<span class="k">end</span>
<span class="nb">puts</span> <span class="s2">&quot;main: Invoking outer&quot;</span>
<span class="n">outer</span>
<span class="nb">puts</span> <span class="s2">&quot;main: Invoked outer&quot;</span>
<span class="c1">#=&amp;gt; main: Invoking outer</span>
<span class="c1">#=&amp;gt;   main -&amp;gt; outer: Invoking inner &amp;lt;creation site&amp;gt;</span>
<span class="c1">#=&amp;gt;      main -&amp;gt; outer -&amp;gt; inner: Calling closure &amp;lt;call site&amp;gt;</span>
<span class="c1">#=&amp;gt;        main -&amp;gt; outer -&amp;gt; inner -&amp;gt; closure: Return from closure</span>
<span class="c1">#=&amp;gt; main: Invoked outer</span>
</code></pre>
</a>