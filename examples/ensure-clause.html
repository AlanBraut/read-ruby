<a href=/examples/ensure-clause.rb><pre class=syntax><code><span class="nb">require</span> <span class="s1">&#39;yaml&#39;</span>
<span class="no">YAML_FILE</span> <span class="o">=</span> <span class="s1">&#39;tasks.yaml&#39;</span>
<span class="k">begin</span>
  <span class="n">tasks</span> <span class="o">=</span> <span class="o">[</span><span class="s1">&#39;Water plants&#39;</span><span class="p">,</span> <span class="s1">&#39;Plant water&#39;</span><span class="o">]</span>
  <span class="c1"># ...</span>
  <span class="n">tasks</span> <span class="o">&lt;&lt;</span> <span class="s1">&#39;Practice pentatonic scales&#39;</span>
  <span class="k">raise</span> <span class="no">RuntimeError</span> <span class="k">unless</span> <span class="n">tasks</span><span class="o">.</span><span class="n">include?</span><span class="p">(</span><span class="s1">&#39;Run 5 miles&#39;</span><span class="p">)</span>
<span class="k">rescue</span> <span class="no">RuntimeError</span>
  <span class="n">tasks</span> <span class="o">&lt;&lt;</span> <span class="s1">&#39;Run 5 miles&#39;</span>
<span class="k">ensure</span>
  <span class="no">File</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="no">YAML_FILE</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="p">{</span><span class="o">|</span><span class="n">f</span><span class="o">|</span> <span class="no">YAML</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">tasks</span><span class="p">,</span> <span class="n">f</span><span class="p">)}</span>
<span class="k">end</span>
<span class="no">YAML</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="no">File</span><span class="o">.</span><span class="n">read</span> <span class="no">YAML_FILE</span><span class="p">)</span> <span class="c1">#=&gt; [&quot;Water plants&quot;, &quot;Plant water&quot;, </span>
<span class="c1">#                     &quot;Practice pentatonic scales&quot;, &quot;Run 5 miles&quot;]</span>
</code></pre>
</a>