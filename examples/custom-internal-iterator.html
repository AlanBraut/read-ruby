<a href=/examples/custom-internal-iterator.rb><pre class=syntax><code><span class="k">def</span> <span class="nf">intermittently</span><span class="p">(</span><span class="n">array</span><span class="p">)</span>
  <span class="n">array</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">element</span><span class="o">|</span>
    <span class="nb">sleep</span> <span class="nb">rand</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">size</span> <span class="o">%</span> <span class="n">array</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
    <span class="k">yield</span> <span class="n">element</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="n">intermittently</span><span class="p">(</span><span class="o">[</span><span class="mi">191</span><span class="p">,</span> <span class="mi">2726</span><span class="p">,</span> <span class="mi">278</span><span class="p">,</span> <span class="mi">12</span><span class="o">**</span><span class="mi">10</span><span class="p">,</span> <span class="mi">182729</span><span class="o">]</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">element</span><span class="o">|</span>
  <span class="nb">puts</span> <span class="no">Time</span><span class="o">.</span><span class="n">now</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%H:%M:%S&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; =&gt; </span><span class="si">#{</span><span class="n">element</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="k">end</span>
<span class="c1"># 00:29:33 =&gt; 191</span>
<span class="c1"># 00:29:33 =&gt; 2726</span>
<span class="c1"># 00:29:45 =&gt; 278</span>
<span class="c1"># 00:30:06 =&gt; 61917364224</span>
<span class="c1"># 00:30:34 =&gt; 182729</span>
</code></pre>
</a>